{
  "version": 3,
  "sources": ["../../src/plugins/switchbot.ts"],
  "sourcesContent": ["/*!\n * Plugin for Switchbot devices using the 0d00 characteristic\n */\n\nimport { Global as _ } from \"../lib/global\";\nimport type { PeripheralInfo } from \"../lib/scanProcessInterface\";\nimport type {\n\tDeviceObjectDefinition,\n\tPlugin,\n\tStateObjectDefinition,\n} from \"./plugin\";\nimport { ChannelObjectDefinition, getServiceData } from \"./plugin\";\n\nconst serviceUUID = \"0d00\";\n\ninterface SwitchbotContext {\n\tperipheral?: PeripheralInfo;\n\tdata?: Buffer;\n\tbattery?: number;\n\tswitchState?: number;\n\tmode?: number;\n}\n\nconst plugin: Plugin<SwitchbotContext> = {\n\tname: \"Switchbot\",\n\tdescription: \"Switchbot devices\",\n\n\tadvertisedServices: [serviceUUID],\n\n\tisHandling: (p) => {\n\t\t// If the peripheral has no serviceData with UUID 0d00, this is not for us\n\t\tif (\n\t\t\t!p.advertisement ||\n\t\t\t!p.advertisement.serviceData ||\n\t\t\t!p.advertisement.serviceData.some((entry) => entry.uuid === \"0d00\")\n\t\t)\n\t\t\treturn false;\n\n\t\t// If the peripheral has no manufacturerData, this is not for us\n\t\tif (!p.advertisement || !p.advertisement.manufacturerData) return false;\n\n\t\t// Switch on p.advertisement.serviceData.data.data\n\t\tfor (const entry of p.advertisement.serviceData) {\n\t\t\tif (entry.data) {\n\t\t\t\tconst data = entry.data;\n\t\t\t\t// Look if the data is a valid Switchbot advertisement\n\t\t\t\tswitch (data[0]) {\n\t\t\t\t\tcase 0x48: // SwitchBot Bot (WoHand)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tcreateContext: (peripheral: PeripheralInfo) => {\n\t\tconst data = getServiceData(peripheral, serviceUUID);\n\t\tif (data === undefined) return;\n\n\t\t// _.adapter.log.info(`Switchbot >> got data: ${data.toString(\"hex\")}`);\n\n\t\treturn parseData(data);\n\t},\n\n\tdefineObjects: (context: SwitchbotContext) => {\n\t\tif (context == undefined) return;\n\n\t\tconst deviceObject: DeviceObjectDefinition = {\n\t\t\t// no special definitions neccessary\n\t\t\tcommon: undefined,\n\t\t\tnative: undefined,\n\t\t};\n\n\t\tconst channelObjects: ChannelObjectDefinition[] = [\n\t\t\t{\n\t\t\t\tid: \"control\",\n\t\t\t\tcommon: {\n\t\t\t\t\t// common\n\t\t\t\t\tname: {\n\t\t\t\t\t\ten: \"Control the device\",\n\t\t\t\t\t\tde: \"Ger\u00E4t steuern\",\n\t\t\t\t\t\tfr: \"Contr\u00F4ler l'appareil\",\n\t\t\t\t\t\tnl: \"Apparaat bedienen\",\n\t\t\t\t\t\tru: \"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E\u043C\",\n\t\t\t\t\t\tpt: \"Controlar o dispositivo\",\n\t\t\t\t\t\tes: \"Controlar el dispositivo\",\n\t\t\t\t\t\tpl: \"Kontroluj urz\u0105dzenie\",\n\t\t\t\t\t\t\"zh-cn\": \"\u63A7\u5236\u8BBE\u5907\",\n\t\t\t\t\t\tuk: \"\u041A\u043E\u043D\u0442\u0440\u043E\u043B\u044C \u043F\u0440\u0438\u0441\u0442\u0440\u043E\u044E\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t];\n\n\t\tconst stateObjects: StateObjectDefinition[] = [\n\t\t\t{\n\t\t\t\tid: \"control.up\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"Up\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Lift the arm of the Switchbot. Press mode only.\",\n\t\t\t\t\t\tde: \"Den Arm des Switchbot anheben. Nur Druckmodus.\",\n\t\t\t\t\t\tfr: \"Soulevez le bras du Switchbot. Mode presse uniquement.\",\n\t\t\t\t\t\tnl: \"Til de arm van de Switchbot op. Alleen drukmodus.\",\n\t\t\t\t\t\tru: \"\u041F\u043E\u0434\u043D\u0438\u043C\u0438\u0442\u0435 \u0440\u0443\u043A\u0443 Switchbot. \u0420\u0435\u0436\u0438\u043C \u043D\u0430\u0436\u0430\u0442\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Levante o bra\u00E7o do Switchbot. Modo de imprensa apenas.\",\n\t\t\t\t\t\tes: \"Levante el brazo del Switchbot. Modo de prensa solamente.\",\n\t\t\t\t\t\tpl: \"Podnie\u015B rami\u0119 Switchbot. Tylko tryb prasy.\",\n\t\t\t\t\t\t\"zh-cn\": \"\u4E3E\u8D77Switchbot\u7684\u624B\u81C2. \u4EC5\u6309\u538B\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u041F\u0456\u0434\u043D\u0456\u043C\u0456\u0442\u044C \u0440\u0443\u043A\u0443 Switchbot. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.down\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"Down\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Lower the arm of the Switchbot. Press mode only.\",\n\t\t\t\t\t\tde: \"Den Arm des Switchbot absenken. Nur Druckmodus.\",\n\t\t\t\t\t\tfr: \"Abaissez le bras du Switchbot. Mode presse uniquement.\",\n\t\t\t\t\t\tnl: \"Laat de arm van de Switchbot zakken. Alleen drukmodus.\",\n\t\t\t\t\t\tru: \"\u041E\u043F\u0443\u0441\u0442\u0438\u0442\u0435 \u0440\u0443\u043A\u0443 Switchbot. \u0420\u0435\u0436\u0438\u043C \u043D\u0430\u0436\u0430\u0442\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Baixe o bra\u00E7o do Switchbot. Modo de imprensa apenas.\",\n\t\t\t\t\t\tes: \"Baje el brazo del Switchbot. Modo de prensa solamente.\",\n\t\t\t\t\t\tpl: \"Obni\u017C rami\u0119 Switchbot. Tylko tryb prasy.\",\n\t\t\t\t\t\t\"zh-cn\": \"\u964D\u4F4ESwitchbot\u7684\u624B\u81C2. \u4EC5\u6309\u538B\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u041E\u043F\u0443\u0441\u0442\u0456\u0442\u044C \u0440\u0443\u043A\u0443 Switchbot. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.press\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"Press\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Lower the arm of the Switchbot and lift it again. Press mode only.\",\n\t\t\t\t\t\tde: \"Den Arm des Switchbot absenken und wieder anheben. Nur Druckmodus.\",\n\t\t\t\t\t\tfr: \"Abaissez le bras du Switchbot et soulevez-le \u00E0 nouveau. Mode presse uniquement.\",\n\t\t\t\t\t\tnl: \"Laat de arm van de Switchbot zakken en til hem weer op. Alleen drukmodus.\",\n\t\t\t\t\t\tru: \"\u041E\u043F\u0443\u0441\u0442\u0438\u0442\u0435 \u0440\u0443\u043A\u0443 Switchbot \u0438 \u0441\u043D\u043E\u0432\u0430 \u043F\u043E\u0434\u043D\u0438\u043C\u0438\u0442\u0435 \u0435\u0435. \u0420\u0435\u0436\u0438\u043C \u043D\u0430\u0436\u0430\u0442\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Baixe o bra\u00E7o do Switchbot e levante-o novamente. Modo de imprensa apenas.\",\n\t\t\t\t\t\tes: \"Baje el brazo del Switchbot y lev\u00E1ntelo de nuevo. Modo de prensa solamente.\",\n\t\t\t\t\t\tpl: \"Obni\u017C rami\u0119 Switchbot i podnie\u015B je ponownie. Tylko tryb prasy.\",\n\t\t\t\t\t\t\"zh-cn\":\n\t\t\t\t\t\t\t\"\u964D\u4F4ESwitchbot\u7684\u624B\u81C2\uFF0C\u7136\u540E\u518D\u6B21\u62AC\u8D77. \u4EC5\u6309\u538B\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u041E\u043F\u0443\u0441\u0442\u0456\u0442\u044C \u0440\u0443\u043A\u0443 Switchbot \u0456 \u0437\u043D\u043E\u0432\u0443 \u043F\u0456\u0434\u043D\u0456\u043C\u0456\u0442\u044C \u0457\u0457. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.on\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"ON\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Turn the switch on. Switch mode only.\",\n\t\t\t\t\t\tde: \"Schalten Sie den Schalter ein. Nur Schaltmodus.\",\n\t\t\t\t\t\tfr: \"Allumez l'interrupteur. Mode de commutation uniquement.\",\n\t\t\t\t\t\tnl: \"Zet de schakelaar aan. Alleen schakelmodus.\",\n\t\t\t\t\t\tru: \"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C. \u0420\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Ligue o interruptor. Modo de comuta\u00E7\u00E3o apenas.\",\n\t\t\t\t\t\tes: \"Encienda el interruptor. Solo modo de interruptor.\",\n\t\t\t\t\t\tpl: \"W\u0142\u0105cz prze\u0142\u0105cznik. Tylko tryb prze\u0142\u0105czania.\",\n\t\t\t\t\t\t\"zh-cn\": \"\u6253\u5F00\u5F00\u5173. \u4EC5\u5207\u6362\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u0423\u0432\u0456\u043C\u043A\u043D\u0456\u0442\u044C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u0447. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.off\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"OFF\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Turn the switch off. Switch mode only.\",\n\t\t\t\t\t\tde: \"Schalten Sie den Schalter aus. Nur Schaltmodus.\",\n\t\t\t\t\t\tfr: \"\u00C9teignez l'interrupteur. Mode de commutation uniquement.\",\n\t\t\t\t\t\tnl: \"Zet de schakelaar uit. Alleen schakelmodus.\",\n\t\t\t\t\t\tru: \"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C. \u0420\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Desligue o interruptor. Modo de comuta\u00E7\u00E3o apenas.\",\n\t\t\t\t\t\tes: \"Apague el interruptor. Solo modo de interruptor.\",\n\t\t\t\t\t\tpl: \"Wy\u0142\u0105cz prze\u0142\u0105cznik. Tylko tryb prze\u0142\u0105czania.\",\n\t\t\t\t\t\t\"zh-cn\": \"\u5173\u95ED\u5F00\u5173. \u4EC5\u5207\u6362\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u0412\u0438\u043C\u043A\u043D\u0456\u0442\u044C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u0447. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.inverse\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"switch\",\n\t\t\t\t\tname: \"Inverse\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Inverse ON/OFF control. Switch mode only.\",\n\t\t\t\t\t\tde: \"Invertiere EIN / AUS-Steuerung. Nur Schaltmodus.\",\n\t\t\t\t\t\tfr: \"Contr\u00F4le inverse ON / OFF. Mode de commutation uniquement.\",\n\t\t\t\t\t\tnl: \"Inverse AAN / UIT-bediening. Alleen schakelmodus.\",\n\t\t\t\t\t\tru: \"\u0418\u043D\u0432\u0435\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0412\u041A\u041B / \u0412\u042B\u041A\u041B. \u0420\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0442\u043E\u043B\u044C\u043A\u043E.\",\n\t\t\t\t\t\tpt: \"Controle inverso LIGADO / DESLIGADO. Modo de comuta\u00E7\u00E3o apenas.\",\n\t\t\t\t\t\tes: \"Control inverso ON / OFF. Solo modo de interruptor.\",\n\t\t\t\t\t\tpl: \"Odwr\u00F3\u0107 sterowanie W\u0141\u0104CZ / WY\u0141\u0104CZ. Tylko tryb prze\u0142\u0105czania.\",\n\t\t\t\t\t\t\"zh-cn\": \"\u53CD\u5411ON / OFF\u63A7\u5236. \u4EC5\u5207\u6362\u6A21\u5F0F.\",\n\t\t\t\t\t\tuk: \"\u0406\u043D\u0432\u0435\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u0443\u043F\u0440\u0430\u0432\u043B\u0456\u043D\u043D\u044F \u0412\u041A\u041B / \u0412\u0418\u041A\u041B. \u0422\u0456\u043B\u044C\u043A\u0438 \u0440\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"control.mode\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"state\",\n\t\t\t\t\tname: {\n\t\t\t\t\t\ten: \"Mode of the Switchbot\",\n\t\t\t\t\t\tde: \"Modus des Switchbot\",\n\t\t\t\t\t\tfr: \"Mode du Switchbot\",\n\t\t\t\t\t\tnl: \"Modus van de Switchbot\",\n\t\t\t\t\t\tru: \"\u0420\u0435\u0436\u0438\u043C Switchbot\",\n\t\t\t\t\t\tpt: \"Modo do Switchbot\",\n\t\t\t\t\t\tes: \"Modo del Switchbot\",\n\t\t\t\t\t\tpl: \"Tryb Switchbot\",\n\t\t\t\t\t\t\"zh-cn\": \"Switchbot\u7684\u6A21\u5F0F\",\n\t\t\t\t\t\tuk: \"\u0420\u0435\u0436\u0438\u043C Switchbot\",\n\t\t\t\t\t},\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"0: Switch mode = On and Off. 1: Press mode = Single press.\",\n\t\t\t\t\t\tde: \"0: Schaltmodus = Ein und Aus. 1: Druckmodus = Einzelklick.\",\n\t\t\t\t\t\tfr: \"0: Mode de commutation = Marche et arr\u00EAt. 1: Mode de pression = Appui simple.\",\n\t\t\t\t\t\tnl: \"0: Schakelmodus = Aan en uit. 1: Drukmodus = Enkele druk.\",\n\t\t\t\t\t\tru: \"0: \u0420\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F = \u0412\u043A\u043B. \u0438 \u0412\u044B\u043A\u043B. 1: \u0420\u0435\u0436\u0438\u043C \u043D\u0430\u0436\u0430\u0442\u0438\u044F = \u041E\u0434\u0438\u043D\u043E\u0447\u043D\u043E\u0435 \u043D\u0430\u0436\u0430\u0442\u0438\u0435.\",\n\t\t\t\t\t\tpt: \"0: Modo de comuta\u00E7\u00E3o = Ligado e desligado. 1: Modo de press\u00E3o = Press\u00E3o \u00FAnica.\",\n\t\t\t\t\t\tes: \"0: Modo de conmutaci\u00F3n = Encendido y apagado. 1: Modo de presi\u00F3n = Pulsaci\u00F3n \u00FAnica.\",\n\t\t\t\t\t\tpl: \"0: Tryb prze\u0142\u0105czania = W\u0142\u0105cz i wy\u0142\u0105cz. 1: Tryb nacisku = Naci\u015Bni\u0119cie jednego przycisku.\",\n\t\t\t\t\t\t\"zh-cn\": \"0\uFF1A\u5207\u6362\u6A21\u5F0F=\u6253\u5F00\u548C\u5173\u95ED\u3002 1\uFF1A\u6309\u4E0B\u6A21\u5F0F=\u5355\u51FB\u3002\",\n\t\t\t\t\t\tuk: \"0: \u0420\u0435\u0436\u0438\u043C \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u043D\u043D\u044F = \u0423\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043E \u0456 \u0412\u0438\u043C\u043A\u043D\u0435\u043D\u043E. 1: \u0420\u0435\u0436\u0438\u043C \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u044F = \u041E\u0434\u0438\u043D\u043E\u0447\u043D\u0435 \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u044F.\",\n\t\t\t\t\t},\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: 0,\n\t\t\t\t\tstates: {\n\t\t\t\t\t\t0: \"Press\",\n\t\t\t\t\t\t1: \"Switch\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"battery\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"value\",\n\t\t\t\t\tname: \"Battery\",\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Battery level of the device\",\n\t\t\t\t\t\tde: \"Batteriestand des Ger\u00E4ts\",\n\t\t\t\t\t\tfr: \"Niveau de batterie de l'appareil\",\n\t\t\t\t\t\tnl: \"Batterijniveau van het apparaat\",\n\t\t\t\t\t\tru: \"\u0423\u0440\u043E\u0432\u0435\u043D\u044C \u0437\u0430\u0440\u044F\u0434\u0430 \u0430\u043A\u043A\u0443\u043C\u0443\u043B\u044F\u0442\u043E\u0440\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\",\n\t\t\t\t\t\tpt: \"N\u00EDvel de bateria do dispositivo\",\n\t\t\t\t\t\tes: \"Nivel de bater\u00EDa del dispositivo\",\n\t\t\t\t\t\tpl: \"Poziom na\u0142adowania baterii urz\u0105dzenia\",\n\t\t\t\t\t\t\"zh-cn\": \"\u8BBE\u5907\u7684\u7535\u6C60\u7535\u91CF\",\n\t\t\t\t\t\tuk: \"\u0420\u0456\u0432\u0435\u043D\u044C \u0437\u0430\u0440\u044F\u0434\u0443 \u0430\u043A\u0443\u043C\u0443\u043B\u044F\u0442\u043E\u0440\u0430 \u043F\u0440\u0438\u0441\u0442\u0440\u043E\u044E\",\n\t\t\t\t\t},\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\tunit: \"%\",\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t\tdef: 0,\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"switchState\",\n\t\t\t\tcommon: {\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tname: \"Switch state\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tread: false,\n\t\t\t\t\twrite: true,\n\t\t\t\t\tdef: false,\n\t\t\t\t\tdesc: {\n\t\t\t\t\t\ten: \"Represents the state of the switch. True = On, False = Off\",\n\t\t\t\t\t\tde: \"Stellt den Zustand des Schalters dar. True = Ein, False = Aus\",\n\t\t\t\t\t\tfr: \"Repr\u00E9sente l'\u00E9tat du commutateur. True = On, False = Off\",\n\t\t\t\t\t\tnl: \"Vertegenwoordigt de staat van de schakelaar. True = Aan, False = Uit\",\n\t\t\t\t\t\tru: \"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044F. True = \u0412\u043A\u043B, False = \u0412\u044B\u043A\u043B\",\n\t\t\t\t\t\tpt: \"Representa o estado do interruptor. True = On, False = Off\",\n\t\t\t\t\t\tes: \"Representa el estado del interruptor. True = On, False = Off\",\n\t\t\t\t\t\tpl: \"Przedstawia stan prze\u0142\u0105cznika. True = On, False = Off\",\n\t\t\t\t\t\t\"zh-cn\": \"\u8868\u793A\u5F00\u5173\u7684\u72B6\u6001\u3002 True = On\uFF0CFalse = Off\",\n\t\t\t\t\t\tuk: \"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0454 \u0441\u0442\u0430\u043D \u043F\u0435\u0440\u0435\u043C\u0438\u043A\u0430\u0447\u0430. True = \u0412\u043A\u043B, False = \u0412\u0438\u043C\u043A\u043D.\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnative: undefined,\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tdevice: deviceObject,\n\t\t\tchannels: channelObjects,\n\t\t\tstates: stateObjects,\n\t\t};\n\t},\n\n\tgetValues: (context: SwitchbotContext) => {\n\t\tif (context == null) return;\n\n\t\t//_.adapter.log.info(`getValues: ${context.mode}`);\n\n\t\tconst ret = {\n\t\t\tswitchState: context.switchState === 1,\n\t\t\tbattery: context.battery,\n\t\t\t\"control.mode\": context.mode,\n\t\t};\n\n\t\treturn ret;\n\t},\n\n\tstateChange: () => {\n\t\t_.adapter.log.info(`stateChange:`);\n\t\t_.adapter.on(\"stateChange\", (id, state) => {\n\t\t\t_.adapter.log.info(`stateChange: ${id} ${JSON.stringify(state)}`);\n\t\t});\n\t\treturn;\n\t},\n};\n\nfunction parseData(data: Buffer): SwitchbotContext {\n\tconst result: Record<string, any> = {};\n\t// Bit 7 of byte 1 is the mode\n\tresult.mode = data[1] & 0x80;\n\t// Bit 6 to 0 of byte 1 is the switch state\n\tresult.switchState = data[1] & 0x7f;\n\t// Bit 4 of byte 1 is data commit flag\n\tresult.dataCommit = data[1] & 0x10;\n\t// Bit 3 of byte 1 represents group D\n\tresult.groupD = data[1] & 0x08;\n\t// Bit 2 of byte 1 represents group C\n\tresult.groupC = data[1] & 0x04;\n\t// Bit 1 of byte 1 represents group B\n\tresult.groupB = data[1] & 0x02;\n\t// Bit 0 of byte 1 represents group A\n\tresult.groupA = data[1] & 0x01;\n\t// Bit 6 to 0 of byte 2 is the battery level\n\tresult.battery = data[2] & 0x7f;\n\t// Bit 7 of byte 2 is the Sync UTC flag\n\tresult.syncUtc = data[2] & 0x80;\n\n\treturn result;\n}\n\nexport = plugin as Plugin;\n"],
  "mappings": "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",
  "names": ["_"]
}
